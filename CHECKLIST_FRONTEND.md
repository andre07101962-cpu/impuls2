# üìã Checklist: Impulse API v3.2 Implementation
**Role:** Frontend Developer
**Objective:** Verify data integrity for the new Publishing features (Polls, Docs, Pinning, Deletion).

## 1. üèó Enum & Types Sync
*–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç.*

- [ ] **PostType Enum**: –û–±–Ω–æ–≤–ª–µ–Ω –ª–∏ `enum` –≤ –∫–æ–¥–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞? –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—Å–µ 5 –∑–Ω–∞—á–µ–Ω–∏–π:
  ```typescript
  export enum PostType {
    POST = 'post',             // Standard
    STORY = 'story',           // Telegram Story
    PAID_MEDIA = 'paid_media', // Telegram Stars
    POLL = 'poll',             // üÜï New!
    DOCUMENT = 'document',     // üÜï New!
  }
  ```
- [ ] **Payload Structure**: –£–±–µ–¥–∏—Å—å, —á—Ç–æ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ `POST /publisher/schedule` –ø–æ–ª–µ `type` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è **–Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ JSON**, –Ω–∞—Ä–∞–≤–Ω–µ —Å `content`, `publishAt` –∏ `channelIds`.

## 2. üìù Payload Generation (Logic Per Type)
*–°–∞–º–∞—è –∫—Ä–∏—Ç–∏—á–Ω–∞—è —á–∞—Å—Ç—å. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏–∫—É —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ `content` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞.*

### A. –¢–∏–ø: `POLL` (–û–ø—Ä–æ—Å)
- [ ] **Validation**: –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞, –µ—Å–ª–∏:
    - –ü–æ–ª–µ `question` –ø—É—Å—Ç–æ–µ.
    - –ú–∞—Å—Å–∏–≤ `options` —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ–Ω—å—à–µ 2-—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.
    - –ú–∞—Å—Å–∏–≤ `options` —Å–æ–¥–µ—Ä–∂–∏—Ç –±–æ–ª—å—à–µ 10-—Ç–∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.
- [ ] **Config**: –û–±—ä–µ–∫—Ç `poll_config` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞.
    - `is_anonymous`: boolean (default: true)
    - `allows_multiple_answers`: boolean (default: false)
    - `type`: 'regular' | 'quiz'
- [ ] **Quiz Logic**: –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω `type: 'quiz'`, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±—è–∑–∞–Ω –ø–µ—Ä–µ–¥–∞—Ç—å `correct_option_id` (–∏–Ω–¥–µ–∫—Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞: 0, 1, 2...).

### B. –¢–∏–ø: `DOCUMENT` (–§–∞–π–ª)
- [ ] **Media**: –ü–æ–ª–µ `media` —Å–æ–¥–µ—Ä–∂–∏—Ç **–æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É** (URL —Ñ–∞–π–ª–∞), –∞ –Ω–µ –º–∞—Å—Å–∏–≤.
- [ ] **Text**: –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –≤ UI –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "Caption" (–ü–æ–¥–ø–∏—Å—å).
- [ ] **Preview**: –ï—Å–ª–∏ —Ñ–∞–π–ª ‚Äî PDF –∏–ª–∏ ZIP, –≤ UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–∫–æ–Ω–∫–∞ —Ñ–∞–π–ª–∞, –∞ –Ω–µ –ø–æ–ø—ã—Ç–∫–∞ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É.

### C. –¢–∏–ø: `STORY` (–ò—Å—Ç–æ—Ä–∏—è)
- [ ] **Media Check**: –ü–æ–ª–µ `media` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.
- [ ] **Media Type**: –†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ —Ñ–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ (–Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã).
- [ ] **Config**: –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ª–∏ `story_config.period` (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)? –ù–∞–ø—Ä–∏–º–µ—Ä, `86400` –¥–ª—è 24 —á–∞—Å–æ–≤.

### D. –¢–∏–ø: `PAID_MEDIA` (–ó–≤–µ–∑–¥—ã)
- [ ] **Stars**: –ü–æ–ª–µ `paid_config.star_count` > 0. UI –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–∑–≤–æ–ª—è—Ç—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å "–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π" –ø–ª–∞—Ç–Ω—ã–π –ø–æ—Å—Ç.
- [ ] **Media**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞–ª–∏—á–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ `media` (—Ñ–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ).

## 3. ‚öôÔ∏è Global Options (–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—Å—Ç–∞)
*–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ `options`.*

- [ ] **Pinning (üÜï)**: –ï—Å—Ç—å –ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "Pin message"?
    - –ó–Ω–∞—á–µ–Ω–∏–µ —É–ª–µ—Ç–∞–µ—Ç –≤ `content.options.pin` (boolean).
- [ ] **Spoilers**: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "Spoiler / Hidden" –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `content.options.has_spoiler`.
- [ ] **Silent**: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "Silent Mode" –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `content.options.disable_notification`.
- [ ] **DRM**: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "Protect Content" –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `content.options.protect_content`.

## 4. üóë Deletion & Editing
*–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.*

- [ ] **Delete Button**: –í —Å–ø–∏—Å–∫–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–π (Calendar/List) –ø–æ—è–≤–∏–ª–∞—Å—å –∫–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è?
- [ ] **Delete API**: –ö–Ω–æ–ø–∫–∞ –≤—ã–∑—ã–≤–∞–µ—Ç `DELETE /publisher/:id`.
- [ ] **Confirmation**: –ü–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª–∫–∞ "Are you sure?".
    - *Context:* –ï—Å–ª–∏ –ø–æ—Å—Ç —É–∂–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω, –æ–Ω —É–¥–∞–ª–∏—Ç—Å—è –∏–∑ –¢–µ–ª–µ–≥—Ä–∞–º–∞. –Æ–∑–µ—Ä –¥–æ–ª–∂–µ–Ω —ç—Ç–æ –ø–æ–Ω–∏–º–∞—Ç—å.
- [ ] **Edit Lock**: –ï—Å–ª–∏ –ø–æ—Å—Ç –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å `PUBLISHED` –∏–ª–∏ `FAILED`, –∫–Ω–æ–ø–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`PATCH`) –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–∫—Ä—ã—Ç–∞ –∏–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ `SCHEDULED`.

## 5. üîç Data Validation (Pre-flight)
*–ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –î–û –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.*

- [ ] **Channels**: –ú–∞—Å—Å–∏–≤ `channelIds` –Ω–µ –ø—É—Å—Ç–æ–π.
- [ ] **Date Format**: –ü–æ–ª–µ `publishAt` –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ UTC ISO String (`2024-05-20T15:30:00.000Z`).
    - *–ß–∞—Å—Ç–∞—è –æ—à–∏–±–∫–∞:* –û—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –±–µ–∑ Timezone Offset.
- [ ] **Media URLs**: –í—Å–µ —Å—Å—ã–ª–∫–∏ –≤ –º–∞—Å—Å–∏–≤–µ `media` –≤–∞–ª–∏–¥–Ω—ã (–Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å http/https).

## 6. üö¶ Error Handling (Response parsing)
*–†–µ–∞–∫—Ü–∏—è –Ω–∞ –æ—Ç–≤–µ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞.*

- [ ] **400 Bad Request**:
    - –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª `Inactive Channel`, UI –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–∞–Ω–∞–ª –∫—Ä–∞—Å–Ω—ã–º.
- [ ] **403 Forbidden**:
    - –ï—Å–ª–∏ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≤–µ—Ä–Ω—É–ª–æ—Å—å "You do not own this post", –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ—Å—Ç–µ—Ä –æ—à–∏–±–∫–∏ –¥–æ—Å—Ç—É–ø–∞.
- [ ] **Success Toast**:
    - –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ (`DELETE`) —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: `{ cancelled: 1, deletedFromTelegram: 0 }`. –•–æ—Ä–æ—à–∏–π UX ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å: *"Scheduled post cancelled"* –∏–ª–∏ *"Message deleted from Channel"*.

---

### üí° Json Example for Testing
*–ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ—Ç JSON —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —Ñ—Ä–æ–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Å–ª–æ–∂–Ω—ã–π –ø–æ—Å—Ç" (–û–ø—Ä–æ—Å —Å –ø–∏–Ω–æ–º).*

```json
{
  "type": "poll",
  "publishAt": "2025-01-01T12:00:00.000Z",
  "channelIds": ["-10012345678"],
  "content": {
    "question": "What is the capital of France?",
    "options": ["Berlin", "Madrid", "Paris"],
    "poll_config": {
      "type": "quiz",
      "correct_option_id": 2,
      "is_anonymous": true
    },
    "options": {
      "pin": true,
      "disable_notification": false
    }
  }
}
```