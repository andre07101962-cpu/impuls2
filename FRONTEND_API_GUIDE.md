
# üìò FRONTEND API GUIDE (Technical Specification)

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è **–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –ø—Ä–∞–≤–¥—ã** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å API.
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫: `Authorization: Bearer <token>`.

---

## üö® –ì–õ–ê–í–ù–û–ï –ü–†–ê–í–ò–õ–û (GLOBAL RULE)

–î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª—é–±—ã—Ö **–¥–µ–π—Å—Ç–≤–∏–π** —Å –∫–∞–Ω–∞–ª–∞–º–∏ (—Å–æ–∑–¥–∞—Ç—å —Ç–æ–ø–∏–∫, –∑–∞–±–∞–Ω–∏—Ç—å, –∑–∞–ø–æ—Å—Ç–∏—Ç—å), –±—ç–∫–µ–Ω–¥ –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å, **–û–¢ –ò–ú–ï–ù–ò –ö–ê–ö–û–ì–û –ë–û–¢–ê** —ç—Ç–æ –¥–µ–ª–∞—Ç—å.
–ü–æ—ç—Ç–æ–º—É –≤ 90% `POST/PATCH` –∑–∞–ø—Ä–æ—Å–æ–≤ –≤—ã **–û–ë–Ø–ó–ê–ù–´** –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `botId` –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ (Body).

---

## üõ† –ú–û–î–£–õ–¨: META (–°—Ç–∞—Ç–∏–∫–∞)

### 1. –ü–æ–ª—É—á–∏—Ç—å —Ü–≤–µ—Ç–∞ –∏ –∏–∫–æ–Ω–∫–∏ –¥–ª—è –¢–æ–ø–∏–∫–æ–≤
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–æ–ø–∏–∫–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ü–≤–µ—Ç–∞ –∏–∫–æ–Ω–∫–∏.
*   **Method:** `GET /meta/topic-stickers`
*   **Response:**
    ```json
    [
      { "id": "blue", "color": 7322096, "emoji": "üîµ" },
      { "id": "yellow", "color": 16766590, "emoji": "üü°" }
    ]
    ```

---

## üì¢ –ú–û–î–£–õ–¨: CHANNELS (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –¢–æ–ø–∏–∫–∞ (Forum Topic)
**–û—à–∏–±–∫–∞ 400 –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –µ—Å–ª–∏ –Ω–µ—Ç `botId` –∏–ª–∏ `channelId`.**
*   **Method:** `POST /channels/topic`
*   **Body (JSON):**
    ```json
    {
      "botId": "uuid-–±–æ—Ç–∞-–∏–∑-—Å–ø–∏—Å–∫–∞-–±–æ—Ç–æ–≤",
      "channelId": "-1001234567890",
      "name": "–ù–æ–≤–∞—è —Ç–µ–º–∞",
      "iconColor": 7322096,      // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–∏–∑ /meta/topic-stickers)
      "iconEmojiId": "54321..."  // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (Custom Emoji ID)
    }
    ```

### 3. –ó–∞–∫—Ä—ã—Ç–∏–µ / –û—Ç–∫—Ä—ã—Ç–∏–µ –¢–æ–ø–∏–∫–∞
**–û—à–∏–±–∫–∞ 400 –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –µ—Å–ª–∏ –Ω–µ—Ç `botId`.**
*   **Method:** `POST /channels/topic/:topicId/close` (–∏–ª–∏ `/reopen`)
*   **URL Params:** `topicId` (UUID —Ç–æ–ø–∏–∫–∞ –∏–∑ –Ω–∞—à–µ–π –ë–î, –ù–ï telegram id)
*   **Body (JSON):**
    ```json
    {
      "botId": "uuid-–±–æ—Ç–∞",
      "channelId": "-1001234567890"
    }
    ```

### 4. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¢–æ–ø–∏–∫–∞
*   **Method:** `PATCH /channels/topic/:topicId`
*   **Body (JSON):**
    ```json
    {
      "botId": "uuid-–±–æ—Ç–∞",
      "channelId": "-1001234567890",
      "name": "–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ", // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
      "iconEmojiId": "123..."    // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    }
    ```

### 5. –£–¥–∞–ª–µ–Ω–∏–µ –¢–æ–ø–∏–∫–∞
‚ö†Ô∏è –£–¥–∞–ª—è–µ—Ç –≤–µ—Ç–∫—É —Ü–µ–ª–∏–∫–æ–º —Å–æ –≤—Å–µ–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.
*   **Method:** `DELETE /channels/topic/:topicId`
*   **Body (JSON):**
    ```json
    {
      "botId": "uuid-–±–æ—Ç–∞",
      "channelId": "-1001234567890"
    }
    ```

### 6. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
*   **Method:** `GET /channels/:channelId/admins`
*   **Body (JSON):** (–î–∞, GET —Å Body –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è, –Ω–æ –ª—É—á—à–µ –ø–µ—Ä–µ–¥–∞—Ç—å query param, –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–µ —É–º–µ–µ—Ç - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ axios config `data`)
    ```json
    {
      "botId": "uuid-–±–æ—Ç–∞"
    }
    ```

### 7. –ë–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Ban)
*   **Method:** `POST /channels/ban`
*   **Body (JSON):**
    ```json
    {
      "botId": "uuid-–±–æ—Ç–∞",
      "channelId": "-1001234567890",
      "targetUserId": 12345678, // Telegram Numeric ID —é–∑–µ—Ä–∞
      "untilDate": 1740000000   // Unix Timestamp (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    }
    ```

---

## ‚úçÔ∏è –ú–û–î–£–õ–¨: PUBLISHER (–ü–æ—Å—Ç–∏–Ω–≥)

### 8. –°–æ–∑–¥–∞–Ω–∏–µ –ü–æ—Å—Ç–∞ (Schedule)
–≠—Ç–æ —Å–∞–º—ã–π —Å–ª–æ–∂–Ω—ã–π –∑–∞–ø—Ä–æ—Å.
*   **Method:** `POST /publisher/schedule`
*   **Body (JSON):**

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ü—Ä–æ—Å—Ç–æ–π –ø–æ—Å—Ç (–¢–µ–∫—Å—Ç + –ö–∞—Ä—Ç–∏–Ω–∫–∞)**
```json
{
  "channelIds": ["-1001234567890"],
  "publishAt": "2024-05-20T15:00:00.000Z", // ISO Date
  "type": "post",
  "content": {
    "text": "Hello <b>World</b>",
    "media": ["https://img.url/1.jpg"],
    "options": {
      "pin": true,
      "disable_notification": false
    }
  }
}
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ü–æ—Å—Ç –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¢–æ–ø–∏–∫ (Forum)**
```json
{
  "channelIds": ["-1001234567890"], // ID –°—É–ø–µ—Ä–≥—Ä—É–ø–ø—ã/–§–æ—Ä—É–º–∞
  "publishAt": "2024-05-20T15:00:00.000Z",
  "type": "post",
  "content": {
    "text": "Message in topic",
    "options": {
      "topic_id": 42 // Telegram Message Thread ID (Integer)
    }
  }
}
```
*–í–∞–∂–Ω–æ: `topic_id` –±–µ—Ä–µ—Ç—Å—è –∏–∑ —Å–≤–æ–π—Å—Ç–≤–∞ `telegramTopicId` –æ–±—ä–µ–∫—Ç–∞ Topic, –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —Å –±—ç–∫–µ–Ω–¥–∞, –∞ –ù–ï –∏–∑ –Ω–∞—à–µ–≥–æ UUID.*

---

## üîÑ –ñ–ò–ó–ù–ï–ù–ù–´–ï –¶–ò–ö–õ–´ (LIFECYCLES)

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç –¢–æ–ø–∏–∫
1.  **UI:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "Create Topic". –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª–∫–∞.
2.  **Frontend:** –î–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å `GET /meta/topic-stickers`, —Ä–∏—Å—É–µ—Ç –ø–∞–ª–∏—Ç—Ä—É —Ü–≤–µ—Ç–æ–≤.
3.  **UI:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∏–º—è "News", –≤—ã–±–∏—Ä–∞–µ—Ç —Å–∏–Ω–∏–π —Ü–≤–µ—Ç.
4.  **Frontend:** –ë–µ—Ä–µ—Ç —Ç–µ–∫—É—â–∏–π `botId` –∏–∑ —Å—Ç–µ–π—Ç–∞ (–≤—ã–±—Ä–∞–Ω–Ω—ã–π –±–æ—Ç —Å–≤–µ—Ä—Ö—É).
5.  **Frontend:** –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `POST /channels/topic`.
    *   Payload: `{ botId: "...", channelId: "...", name: "News", iconColor: 0x6FB9F0 }`.
6.  **Backend:** –ò–¥–µ—Ç –≤ Telegram API -> –°–æ–∑–¥–∞–µ—Ç —Ç–æ–ø–∏–∫ -> –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î -> –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç Topic.
7.  **Frontend:** –ü–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç 201 Created. –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π —Ç–æ–ø–∏–∫ –≤ —Å–ø–∏—Å–æ–∫ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –¢–æ–ø–∏–∫
1.  **UI:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∏–∫–æ–Ω–∫—É "–ó–∞–º–æ–∫" (Close) –≤ —Ç–∞–±–ª–∏—Ü–µ —Ç–æ–ø–∏–∫–æ–≤.
2.  **Frontend:** –°—Ç–∞–≤–∏—Ç –Ω–∞ –∏–∫–æ–Ω–∫—É —Å–ø–∏–Ω–Ω–µ—Ä (Loading).
3.  **Frontend:** –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `POST /channels/topic/:id/close`.
    *   Payload: `{ botId: "...", channelId: "..." }`.
4.  **Backend:** –ü—Ä–æ—Å–∏—Ç Telegram –∑–∞–∫—Ä—ã—Ç—å –≤–µ—Ç–∫—É -> –û–±–Ω–æ–≤–ª—è–µ—Ç `isClosed = true` –≤ –ë–î.
5.  **Frontend:** –ü–æ–ª—É—á–∞–µ—Ç 201 OK. –£–±–∏—Ä–∞–µ—Ç —Å–ø–∏–Ω–Ω–µ—Ä. –ú–µ–Ω—è–µ—Ç –∏–∫–æ–Ω–∫—É –Ω–∞ –∑–∞–∫—Ä—ã—Ç—ã–π –∑–∞–º–æ–∫.

